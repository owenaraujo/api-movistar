(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e81e1f1a"],{"1f4c":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),n={class:"container-fluid"},r={class:"text-right"},o=Object(a["i"])("i",{class:"fas fa-user-plus"},null,-1),i=Object(a["h"])(" Nuevo Cliente"),l={class:"row"},u={class:"col-sm-3"},s=Object(a["i"])("h4",{class:""},"Datos del Cliente",-1),d={style:{"font-size":"16px","text-transform":"uppercase",color:"blue"}},b=Object(a["i"])("label",{for:"buscarCliente"},"busqueda de cliente",-1),O={key:0,class:"resultado"},j={multiple:"",class:"custom-select scrollbar-light-blue"},p={class:"col-lg-12"},f=Object(a["i"])("h4",{class:"text-center"},"Datos Venta",-1),m={class:"table-responsive"},v={ref:"table",class:"table table-hover"},h={class:"thead-dark"},g=Object(a["i"])("tr",null,[Object(a["i"])("th",{width:"100px"},"Código"),Object(a["i"])("th",null,"modelo"),Object(a["i"])("th",null,"Stock"),Object(a["i"])("th",{width:"100px"},"IVA"),Object(a["i"])("th",{class:"textright"},"Precio"),Object(a["i"])("th",{class:"textright"},"Precio Total"),Object(a["i"])("th",null,"Acciones")],-1),k={key:0,class:"resultado2"},C={multiple:"",class:"custom-select scrollbar-light-blue"},P={id:"txt_descripcion"},x={id:"txt_existencia"},y={id:"txt_precio",class:"textright"},V={id:"txt_precio_total",class:"txtright"},w=Object(a["i"])("tr",null,[Object(a["i"])("th",null,"Código"),Object(a["i"])("th",null,"modelo"),Object(a["i"])("th",null,"IMEI"),Object(a["i"])("th",null,"cantidad"),Object(a["i"])("th",{class:"textright"},"Precio"),Object(a["i"])("th",{class:"textright"},"Precio Total"),Object(a["i"])("th",null,"Acciones")],-1),_={id:"detalle_venta"},F={id:"detalle_totales"},A=Object(a["i"])("td",{colspan:"6",class:"textright"},"Sub-total",-1),L=Object(a["i"])("td",{colspan:"6",class:"textright"},"iva",-1),B=Object(a["i"])("td",{colspan:"6",class:"textright"},"total a pagar",-1),U={class:"col-lg-12 text-center"},I=Object(a["i"])("label",null,"Acciones",-1),K={class:"form-group"},N=Object(a["i"])("i",{class:"fas fa-save"},null,-1),S=Object(a["h"])(" Generar Venta "),T={key:0},q={class:"modal fade show",id:"staticBackdrop","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel",style:{display:"block"},"aria-modal":"true"},G={class:"modal-dialog modal-center"},$={class:"modal-content"},D={class:"modal-header"},E=Object(a["i"])("h5",{class:"modal-title",id:"staticBackdropLabel"},"Modal title",-1),J=Object(a["i"])("span",{"aria-hidden":"true"},"×",-1),M={class:"modal-body"},z={key:0},R={class:"form-check"},H=Object(a["i"])("label",{class:"form-check-label",for:"defaultCheck1"}," Reportar venta como prestamo ",-1),Q=Object(a["i"])("label",{for:"inputNota"},null,-1),W={key:1,class:"text-center"},X=Object(a["i"])("p",null,[Object(a["i"])("strong",{class:"mt-4"},"que desea hacer?")],-1),Y=Object(a["i"])("br",null,null,-1),Z={class:"modal-footer"},tt=Object(a["i"])("div",{class:"modal-backdrop fade show"},null,-1);function et(t,e,c,et,ct,at){var nt=Object(a["C"])("router-link"),rt=Object(a["C"])("Popper"),ot=Object(a["C"])("ListProductos");return Object(a["t"])(),Object(a["e"])(a["a"],null,[Object(a["i"])("div",n,[Object(a["i"])("div",r,[Object(a["i"])(nt,{to:"/clientes/add",onClick:e[1]||(e[1]=function(t){return et.sendUrl()}),class:"mt-2 btn btn-primary text-rigth btn_new_cliente"},{default:Object(a["O"])((function(){return[o,i]})),_:1})]),Object(a["i"])("div",l,[Object(a["i"])("div",u,[s,Object(a["P"])(Object(a["i"])("div",null,[Object(a["i"])("h5",d,Object(a["F"])(et.datosCliente.nombre)+" "+Object(a["F"])(et.datosCliente.apellido),1),Object(a["i"])("p",null,Object(a["F"])(et.datosCliente.dni),1)],512),[[a["L"],et.dataCliente]]),Object(a["P"])(Object(a["i"])("div",null,[b,Object(a["P"])(Object(a["i"])("input",{autocomplete:"off","onUpdate:modelValue":e[2]||(e[2]=function(t){return et.buscarClientes=t}),id:"buscarCliente",type:"text",class:"form-control mb-2"},null,512),[[a["K"],et.buscarClientes]]),et.buscarClientes?(Object(a["t"])(),Object(a["e"])("div",O,[Object(a["i"])("select",j,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(et.clientes,(function(t){return Object(a["P"])((Object(a["t"])(),Object(a["e"])("option",{onClick:function(e){return et.selectCliente(t)},key:t._id,value:t._id},Object(a["F"])(t.nombre),9,["onClick","value"])),[[a["L"],-1!=t.nombre.toLowerCase().indexOf(et.buscarClientes.toLowerCase())||-1!=t.dni.toLowerCase().indexOf(et.buscarClientes.toLowerCase())]])})),128))])])):Object(a["f"])("",!0)],512),[[a["L"],!et.dataCliente]])]),Object(a["i"])("div",p,[f,Object(a["i"])("div",m,[Object(a["i"])("table",v,[Object(a["i"])("thead",h,[g,Object(a["i"])("tr",null,[Object(a["i"])("td",null,[Object(a["P"])(Object(a["i"])("input",{autocomplete:"off",type:"text",class:"form-control form-control-md",name:"txt_cod_producto",id:"txt_cod_producto","onUpdate:modelValue":e[3]||(e[3]=function(t){return et.buscarProducto=t})},null,512),[[a["K"],et.buscarProducto]]),et.buscarProducto?(Object(a["t"])(),Object(a["e"])("div",k,[Object(a["i"])("select",C,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(et.productos,(function(t){return Object(a["P"])((Object(a["t"])(),Object(a["e"])("option",{onClick:function(e){return et.selectProducto(t)},key:t._id,value:t._id},Object(a["F"])(t.nombre)+"-"+Object(a["F"])(t.codigo),9,["onClick","value"])),[[a["L"],-1!=t.codigo.toLowerCase().indexOf(et.buscarProducto.toLowerCase())]])})),128))])])):Object(a["f"])("",!0)]),Object(a["i"])("td",P,Object(a["F"])(et.inputsAgregar.modelo||"-"),1),Object(a["i"])("td",x,Object(a["F"])(et.inputsAgregar.cantidad||0),1),Object(a["i"])("td",null,[Object(a["i"])(rt,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat((et.total-et.inputsAgregar.precio)*et.dolar||0)+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(et.total-et.inputsAgregar.precio||0)+"$ ",1)]})),_:1},8,["content"])]),Object(a["i"])("td",y,[Object(a["i"])(rt,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat(et.inputsAgregar.precio*et.dolar||0)+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(et.inputsAgregar.precio||0)+"$(+"+Object(a["F"])(et.inputsAgregar.iva)+"% iva ) ",1)]})),_:1},8,["content"])]),Object(a["i"])("td",V,[Object(a["i"])(rt,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat(et.total*et.dolar||0)+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(et.total||0)+"$ ",1)]})),_:1},8,["content"])]),Object(a["i"])("td",null,[et.inputsAgregar.cantidad?Object(a["P"])((Object(a["t"])(),Object(a["e"])("button",{key:0,onClick:e[4]||(e[4]=function(t){return et.agregarCarrito()}),id:"add_product_venta",class:"btn btn-dark",disabled:0===et.inputsAgregar.cantidad}," Agregar ",8,["disabled"])),[[a["L"],et.cantidad>0]]):Object(a["f"])("",!0)])]),w]),Object(a["i"])("tbody",_,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(et.productosVenta,(function(t,e){return Object(a["t"])(),Object(a["e"])(ot,{indice:e,key:e,producto:t},null,8,["indice","producto"])})),128))]),Object(a["i"])("tfoot",F,[Object(a["i"])("tr",null,[A,Object(a["i"])("td",null,[Object(a["i"])(rt,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat(et.totalVenta*et.dolar,"0,00")+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(et.totalVenta),1)]})),_:1},8,["content"])])]),Object(a["i"])("tr",null,[L,Object(a["i"])("td",null,[Object(a["i"])(rt,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat(et.iva*et.dolar)+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(et.iva),1)]})),_:1},8,["content"])])]),Object(a["i"])("tr",null,[B,Object(a["i"])("td",null,[Object(a["i"])(rt,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat((et.iva+et.totalVenta)*et.dolar)+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(et.iva+et.totalVenta),1)]})),_:1},8,["content"])])])])],512)]),Object(a["i"])("div",U,[I,Object(a["i"])("div",K,[Object(a["i"])("button",{onClick:e[5]||(e[5]=function(t){return et.cancelVenta()}),class:"btn btn-danger mr-2"}," Anular "),Object(a["i"])("button",{onClick:e[6]||(e[6]=function(t){return et.preGuardarCompra()}),class:"btn btn-primary",id:"btn_facturar_venta"},[N,S])])])])])]),et.modalVenta?(Object(a["t"])(),Object(a["e"])("div",T,[Object(a["i"])("div",q,[Object(a["i"])("div",G,[Object(a["i"])("div",$,[Object(a["i"])("div",D,[E,Object(a["i"])("button",{type:"button",class:"close",onClick:e[7]||(e[7]=function(t){return et.modalVenta=!1}),"data-dismiss":"modal","aria-label":"Close"},[J])]),Object(a["i"])("div",M,[et.statusVenta?Object(a["f"])("",!0):(Object(a["t"])(),Object(a["e"])("div",z,[Object(a["i"])("div",R,[Object(a["P"])(Object(a["i"])("input",{class:"form-check-input","onUpdate:modelValue":e[8]||(e[8]=function(t){return et.prestamo=t}),type:"checkbox",id:"defaultCheck1"},null,512),[[a["I"],et.prestamo]]),H]),Q,Object(a["P"])(Object(a["i"])("input",{"onUpdate:modelValue":e[9]||(e[9]=function(t){return et.notaVenta=t}),type:"text",id:"inputNota",placeholder:"agregar una nota",class:"form-control"},null,512),[[a["K"],et.notaVenta]])])),et.statusVenta?(Object(a["t"])(),Object(a["e"])("div",W,[X,Y,Object(a["i"])("button",{onClick:e[10]||(e[10]=function(){return et.newVenta&&et.newVenta.apply(et,arguments)}),class:"btn btn-primary mr-2"},"registrar otra venta"),Object(a["i"])("button",{onClick:e[11]||(e[11]=function(){return et.generarPdf&&et.generarPdf.apply(et,arguments)}),class:"btn btn-success"},"inprimir factura")])):Object(a["f"])("",!0)]),Object(a["i"])("div",Z,[Object(a["i"])("button",{onClick:e[12]||(e[12]=function(t){return et.modalVenta=!1}),class:"btn btn-secondary","data-dismiss":"modal"}," Cerrar "),Object(a["i"])("button",{onClick:e[13]||(e[13]=function(t){return et.guardarCompra()}),class:"btn btn-primary"}," Comprar ")])])])]),tt])):Object(a["f"])("",!0)],64)}c("d81d");var ct=c("5502"),at=c("a1e9"),nt={class:""},rt=Object(a["i"])("i",{class:"fas fa-trash"},null,-1),ot=Object(a["i"])("i",{class:"svg-inline--fa fas fa-trash-alt fa-w-14"},null,-1),it=Object(a["h"])(" Eliminar ");function lt(t,e,c,n,r,o){var i=Object(a["C"])("Popper");return Object(a["t"])(),Object(a["e"])("tr",null,[Object(a["i"])("th",null,Object(a["F"])(c.producto.codigo),1),Object(a["i"])("th",null,Object(a["F"])(c.producto.marca)+"-"+Object(a["F"])(c.producto.modelo),1),Object(a["i"])("th",nt,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["A"])(c.producto.imei,(function(t,e){return Object(a["t"])(),Object(a["e"])("div",{class:"form-row align-items-center",key:e},[Object(a["P"])(Object(a["i"])("input",{class:[{"is-invalid":""==n.Producto.imei[e].value},"form-control col-md-9 my-1"],placeholder:"imei","onUpdate:modelValue":function(t){return n.Producto.imei[e].value=t},type:"tel",maxlength:"15"},null,10,["onUpdate:modelValue"]),[[a["K"],n.Producto.imei[e].value,void 0,{number:!0}]]),Object(a["i"])("button",{onClick:function(t){return n.deleteOneItem(e)},class:"btn btn-danger ml-2 col-md-2 my-1"},[rt],8,["onClick"])])})),128))]),Object(a["i"])("th",null,Object(a["F"])(c.producto.cantidad),1),Object(a["i"])("th",null,[Object(a["i"])(i,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat(c.producto.precio*n.dolar)+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(c.producto.precio)+" (+"+Object(a["F"])(c.producto.iva)+"% iva) ",1)]})),_:1},8,["content"])]),Object(a["i"])("th",null,[Object(a["i"])(i,{class:"dark-popper",arrow:"",hover:"",placement:"left",content:t.numeralFormat(n.total*n.dolar)+" Bs"},{default:Object(a["O"])((function(){return[Object(a["h"])(Object(a["F"])(n.total),1)]})),_:1},8,["content"])]),Object(a["i"])("th",null,[Object(a["i"])("button",{onClick:e[1]||(e[1]=function(t){return n.deleteProduct(c.indice)}),class:"btn btn-danger"},[ot,it])])])}c("a434");var ut=c("5c40"),st=c("4b43"),dt={props:["producto","indice"],components:{Popper:st["a"]},setup:function(t){var e=Object(ct["b"])(),c=Object(at["k"])(t.producto),a=Object(ut["d"])((function(){return e.state.system.info.dolar})),n=Object(ut["d"])((function(){var t=c.value,e=t.precio*t.iva/100*t.cantidad,a=t.precio*t.cantidad;return a||(a=0),e||(e=0),a+e}));function r(t){e.dispatch("resProducto",{id:c.value.producto_id,indice:t}),c.value.imei.splice(t,1)}function o(t){e.dispatch("deleteStore",t)}return{total:n,dolar:a,deleteProduct:o,Producto:c,deleteOneItem:r}}};dt.render=lt;var bt=dt,Ot=c("98a0"),jt={props:["param"],components:{ListProductos:bt,Popper:st["a"]},setup:function(){var t=Object(ct["b"])();t.dispatch("getProductos"),t.dispatch("buscar"),t.dispatch("getClientes");var e=Object(at["a"])((function(){return t.state.system.info.dolar})),c=Object(at["k"])(!1),a=Object(at["k"])(""),n=Object(at["k"])({}),r=Object(at["k"])(1),o=Object(at["k"])(""),i=Object(at["a"])((function(){return t.state.toask})),l=Object(at["a"])((function(){return t.state.productosVenta})),u=Object(at["a"])((function(){return t.state.statusVenta})),s=Object(at["k"])(""),d=Object(at["k"])(!1),b=Object(at["a"])((function(){var t=n.value,e=t.precio*t.iva/100*r.value,c=t.precio*r.value;return c||(c=0),e||(e=0),c+e})),O=Object(at["a"])((function(){return t.state.dataCliente})),j=Object(at["a"])((function(){return t.state.datosCliente})),p=Object(at["a"])((function(){return l.value.reduce((function(t,e){return t+e.cantidad*e.precio}),0)})),f=Object(at["a"])((function(){return l.value.reduce((function(t,e){return t+e.cantidad*e.precio*e.iva/100}),0)})),m=Object(at["a"])((function(){return t.state.productosTrue})),v=Object(at["a"])((function(){return t.state.clientesActivos}));function h(){t.dispatch("vaciarVenta"),s.value="",d.value=!1,c.value=!1}function g(e){o.value="",t.dispatch("guardarCliente",e)}var k=function(){var e={ruta:"/ventas/add"};t.dispatch("sendUrl",e)};function C(){if(!O.value)return Object(Ot["a"])("especifique un cliente",i.value.warning);if(0==l.value.length)return Object(Ot["a"])("no se puede hacer una venta vacia",i.value.warning);var t=l.value.map((function(t){var e=t.imei.map((function(t){return!!t.value||(t.value="",!1)}));return-1==e.indexOf(!1)}));if(-1!=t.indexOf(!1))return Object(Ot["a"])("el campo imei no puede estar vacio",i.value.warning);c.value=!0}function P(t){a.value="",n.value=t}function x(){r.value>n.value.cantidad&&(r.value=n.value.cantidad)}function y(){var e={productName:n.value.nombre,modelo:n.value.modelo,marca:n.value.marca,precio:n.value.precio,codigo:n.value.codigo,imei:[{value:null}],cantidad:r.value,iva:n.value.iva,producto_id:n.value._id};t.dispatch("agregarToCarrito",e)}function V(){t.dispatch("deleteProccessVenta"),n.value={},r.value=1}function w(){t.dispatch("generarPdf")}function _(){t.dispatch("comprar",{nota:s.value,prestamo:d.value})}return{newVenta:h,generarPdf:w,statusVenta:u,dolar:e,prestamo:d,modalVenta:c,notaVenta:s,preGuardarCompra:C,guardarCompra:_,iva:f,totalVenta:p,cancelVenta:V,agregarCarrito:y,productosVenta:l,verifyStock:x,total:b,cantidad:r,inputsAgregar:n,selectProducto:P,buscarProducto:a,sendUrl:k,selectCliente:g,productos:m,buscarClientes:o,clientes:v,dataCliente:O,datosCliente:j}}};c("ff24");jt.render=et;e["default"]=jt},"5fed":function(t,e,c){},ff24:function(t,e,c){"use strict";c("5fed")}}]);
//# sourceMappingURL=chunk-e81e1f1a.d5f72915.js.map